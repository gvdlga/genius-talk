# Story 1.4: User & Agent Roster UI

## Status
Draft

## Story
**As an** administrator,
**I want** a user interface to view all users and registered agents,
**so that** I can manage platform access.

## Acceptance Criteria
1. An admin-only UI section exists.
2. The admin UI lists all human users who have accessed the system.
3. The admin UI lists all registered AI agents.
4. An administrator can de-register an agent from the Genius Talk system.

## Tasks / Subtasks
- [ ] Task 1 (AC: 1, 2, 3): Create the Admin Roster UI.
  - [ ] Subtask 1.1: Create a new page at `/admin/roster`. [Source: docs/architecture/frontend-architecture.md]
  - [ ] Subtask 1.2: This page should be protected and only accessible to users with the 'admin' role. [Source: docs/architecture/frontend-architecture.md]
  - [ ] Subtask 1.3: Create a new component `UserRoster` that fetches and displays a list of all users. [Source: docs/architecture/components.md]
  - [ ] Subtask 1.4: Create a new component `AgentRoster` that fetches and displays a list of all agents. [Source: docs/architecture/components.md]
  - [ ] Subtask 1.5: Use Zustand for state management of the user and agent lists. [Source: docs/architecture/tech-stack.md]
  - [ ] Subtask 1.6: Write unit tests for the new components using Jest and React Testing Library. [Source: docs/architecture/tech-stack.md]
- [ ] Task 2 (AC: 4): Implement Agent De-registration.
    - [ ] Subtask 2.1: Add a "De-register" button to each agent in the `AgentRoster` component.
    - [ ] Subtask 2.2: Create a new API endpoint `DELETE /api/accounts/{accountId}/agents/{agentId}`. [Source: docs/architecture/api-specification.md]
    - [ ] Subtask 2.3: The endpoint should remove the agent from the database. [Source: docs/architecture/database-schema.md]
    - [ ] Subtask 2.4: Write unit tests for the new API endpoint using Jest and Supertest. [Source: docs/architecture/tech-stack.md]

## Dev Notes

### Previous Story Insights
The QA review of story 1.3 highlighted a critical security vulnerability where the BetterAuth token was not being validated with the BetterAuth service. While this story does not directly deal with token validation, it is a reminder to be vigilant about security. The developer also had issues with mocking the Agent model in tests, which might be relevant for the tests in this story.

### Data Models
- **User Model**: The `UserRoster` component will display a list of `User` objects. [Source: docs/architecture/data-models.md]
- **Agent Model**: The `AgentRoster` component will display a list of `Agent` objects. [Source: docs/architecture/data-models.md]

### API Specifications
- A new endpoint `DELETE /api/accounts/{accountId}/agents/{agentId}` will be created. [Source: docs/architecture/api-specification.md]

### Frontend Architecture
- The new page will be created at `/admin/roster`. [Source: docs/architecture/frontend-architecture.md]
- The page will be protected by a layout-based guard. [Source: docs/architecture/frontend-architecture.md]
- New components will be created in `src/components`. [Source: docs/architecture/components.md]
- Zustand will be used for state management. [Source: docs/architecture/tech-stack.md]

### Testing
- Unit tests for new components should be created using Jest and React Testing Library. [Source: docs/architecture/tech-stack.md]
- Unit tests for the new API endpoint should be created using Jest and Supertest. [Source: docs/architecture/tech-stack.md]

## Change Log
| Date | Version | Description | Author |
|---|---|---|---|
| 2025-08-09 | 1.0 | Initial draft | Bob (Scrum Master) |
| 2025-08-09 | 1.1 | PO Review - Validated and Approved | Sarah (Product Owner) |

## Dev Agent Record

### Agent Model Used
{{agent_model_name_version}}

### Debug Log References

### Completion Notes List

### File List

## QA Results
